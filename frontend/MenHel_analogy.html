<!DOCTYPE html>
<html lang="en">
<head>
  <title id="page-title"></title>
  <!-- Load component script with defer -->
  <script src="../js/components.js" defer></script>
    
<style>/* Consolidated CSS - matched to Home.html color scheme */
:root {
  --primary: #4a6fa5;    /* Calming blue - matches Home.html */
  --primary-light: #88a4c7;
  --primary-dark: #3a5a80;
  --secondary: #7ba05b;  /* Natural green - matches Home.html */
  --accent: #d4a5a5;     /* Soft pink - matches Home.html */
  --light: #f8f9fa;
  --dark: #2c3e50;
  --success: #4caf50;
  --warning: #ff9800;
  --danger: #f44336;
  --danger-light: #ffebee;
  --danger-dark: #d32f2f;
  --gray: #6c757d;
  --gray-light: #e9ecef;
  --transition: all 0.3s ease;
  --radius: 12px;
  --white: #ffffff;
  --shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
  --shadow-lg: 0 8px 15px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 40px rgba(0, 0, 0, 0.15);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
  -webkit-text-size-adjust: 100%;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  line-height: 1.6;
  color: var(--dark);
  background-color: var(--white);
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Hero Section - Matched to Home.html */
.hero {
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  color: var(--dark);
  padding: clamp(3rem, 8vw, 6rem) clamp(1rem, 4vw, 2.5rem);
  text-align: center;
  position: relative;
  margin-bottom: clamp(1.5rem, 4vw, 2rem);
  overflow: hidden;
}

.hero::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800" opacity="0.02"><path fill="%234a6fa5" d="M0,0V800H1200V0ZM600,400C600,267,709.5,160,850,160S1100,267,1100,400,990.5,640,850,640,600,533,600,400ZM100,400c0-133,109.5-240,250-240S600,267,600,400,490.5,640,350,640,100,533,100,400Z"/></svg>');
  background-size: cover;
  pointer-events: none;
}

.hero-content {
  max-width: min(95%, 800px);
  margin: 0 auto;
  position: relative;
  z-index: 1;
}

.hero h1 {
  font-size: clamp(1.8rem, 5vw, 2.8rem);
  color: var(--dark);
  margin-bottom: clamp(1rem, 3vw, 1.5rem);
  font-weight: 300;
  line-height: 1.2;
  word-wrap: break-word;
  overflow-wrap: break-word;
  animation: fadeInUp 0.8s ease 0.2s forwards;
  opacity: 0;
}

.hero h1 strong {
  font-weight: 600;
  color: var(--primary);
}

.hero p {
  font-size: clamp(1rem, 2.5vw, 1.2rem);
  color: var(--gray);
  max-width: min(95%, 700px);
  margin: 0 auto clamp(1.5rem, 4vw, 2.5rem);
  line-height: 1.6;
  word-wrap: break-word;
  overflow-wrap: break-word;
  animation: fadeInUp 0.8s ease 0.4s forwards;
  opacity: 0;
}

/* Container - Matched to Home.html */
.container {
  max-width: min(95%, 1200px);
  margin: 0 auto;
  padding: 0 clamp(1rem, 3vw, 1.5rem);
}

/* Disclaimer Alert - Updated style */
.disclaimer-alert {
  background: #fff3cd;
  border: 1px solid #ffeaa7;
  border-radius: var(--radius);
  padding: clamp(1rem, 3vw, 1.5rem);
  margin: clamp(1.5rem, 4vw, 2rem) 0;
  display: flex;
  align-items: flex-start;
  gap: clamp(0.75rem, 2vw, 1rem);
  box-shadow: var(--shadow);
  animation: fadeIn 0.8s ease 0.6s forwards;
  opacity: 0;
  position: relative;
}

.alert-icon {
  font-size: clamp(1.4rem, 3.5vw, 1.8rem);
  flex-shrink: 0;
  color: #856404;
  min-width: 40px;
}

.alert-content {
  flex: 1;
  min-width: 0;
}

.alert-content h3 {
  color: #856404;
  margin-bottom: clamp(0.4rem, 1.5vw, 0.5rem);
  font-size: clamp(1rem, 2.5vw, 1.3rem);
  font-weight: 600;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.alert-content p {
  color: #856404;
  line-height: 1.6;
  font-size: clamp(0.85rem, 2vw, 1rem);
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Global Controls - Updated style */
.global-controls {
  display: flex;
  gap: clamp(0.5rem, 2vw, 1rem);
  justify-content: center;
  margin: clamp(1.5rem, 4vw, 2.5rem) 0;
  flex-wrap: wrap;
  animation: fadeIn 0.8s ease 0.8s forwards;
  opacity: 0;
}

/* Buttons - Updated to match prediction.css style */
.global-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: clamp(0.75rem, 2vw, 1rem) clamp(1rem, 3vw, 1.5rem);
  border: none;
  border-radius: 50px;
  background-color: var(--primary);
  color: white;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition);
  font-size: clamp(0.85rem, 2vw, 1rem);
  font-family: inherit;
  min-height: 44px; /* Minimum touch target */
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  user-select: none;
  position: relative;
  overflow: hidden;
}

.global-btn::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit;
  background: rgba(255, 255, 255, 0.1);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.global-btn:hover::after {
  opacity: 1;
}

.global-btn:hover {
  background-color: var(--primary-light);
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.global-btn:active {
  transform: translateY(0);
}

.global-btn.stop {
  background-color: var(--danger);
}

.global-btn.stop:hover {
  background-color: var(--danger-dark);
}

/* Comparison Grid - Updated style */
.comparison-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: clamp(1.25rem, 3vw, 2rem);
  margin-bottom: clamp(2rem, 5vw, 3rem);
}

/* Card Layout - Matched to Home.html */
.visualization-card {
  background: var(--white);
  border-radius: var(--radius);
  padding: clamp(1.25rem, 3vw, 2rem);
  box-shadow: var(--shadow);
  transition: var(--transition);
  display: flex;
  flex-direction: column;
  height: 100%;
  border: 1px solid var(--gray-light);
  -webkit-tap-highlight-color: transparent;
}

.visualization-card:hover {
  box-shadow: var(--shadow-lg);
  transform: translateY(-3px);
}

.visualization-card:active {
  transform: translateY(-1px);
}

/* Card Header - Updated style */
.card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: clamp(1rem, 3vw, 1.5rem);
  flex-wrap: wrap;
  gap: 0.75rem;
}

.card-title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: clamp(1.1rem, 2.5vw, 1.4rem);
  font-weight: 500;
  color: var(--dark);
  word-wrap: break-word;
  overflow-wrap: break-word;
  flex: 1;
  min-width: 0;
}

.condition-indicator {
  padding: clamp(0.3rem, 1vw, 0.4rem) clamp(0.75rem, 2vw, 1rem);
  border-radius: 20px;
  font-size: clamp(0.75rem, 1.8vw, 0.9rem);
  font-weight: 600;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: min(180px, 100%);
  -webkit-tap-highlight-color: transparent;
  flex-shrink: 0;
}

/* Condition indicators with updated colors */
.bipolar1-indicator { 
  background: rgba(244, 67, 54, 0.1); 
  color: var(--danger); 
  border: 1px solid rgba(244, 67, 54, 0.2);
}

.bipolar2-indicator { 
  background: rgba(123, 160, 91, 0.1); 
  color: var(--secondary); 
  border: 1px solid rgba(123, 160, 91, 0.2);
}

.depression-indicator { 
  background: var(--gray-light); 
  color: var(--gray); 
  border: 1px solid rgba(108, 117, 125, 0.2);
}

.normal-indicator { 
  background: rgba(76, 175, 80, 0.1); 
  color: var(--success); 
  border: 1px solid rgba(76, 175, 80, 0.2);
}

/* Human Timeline Section - Updated style */
.human-timeline-section {
  display: flex;
  flex-direction: column;
  gap: clamp(1rem, 2.5vw, 1.5rem);
  margin-bottom: clamp(1rem, 2.5vw, 1.5rem);
}

.human-container {
  position: relative;
  height: clamp(100px, 25vw, 160px);
  background: var(--light);
  border-radius: var(--radius);
  padding: clamp(0.75rem, 2vw, 1rem);
  overflow: hidden;
  border: 1px solid var(--gray-light);
  min-height: 120px;
}

.conversation-box {
  position: absolute;
  top: clamp(0.5rem, 1.5vw, 0.75rem);
  left: clamp(0.5rem, 1.5vw, 0.75rem);
  right: clamp(0.5rem, 1.5vw, 0.75rem);
  background: white;
  padding: clamp(0.6rem, 1.5vw, 0.8rem) clamp(0.75rem, 2vw, 1rem);
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
  font-size: clamp(0.75rem, 2vw, 0.9rem);
  line-height: 1.4;
  z-index: 2;
  transition: var(--transition);
  border: 1px solid var(--gray-light);
  word-wrap: break-word;
  overflow-wrap: break-word;
  max-height: 60px;
  overflow: hidden;
}

.walking-human {
  position: absolute;
  bottom: clamp(1rem, 3vw, 1.5rem);
  left: 0;
  transition: left 1s ease-in-out;
  z-index: 1;
}

.walker {
  font-size: clamp(2rem, 5vw, 3rem);
  transition: var(--transition);
  color: var(--primary);
  -webkit-user-select: none;
  user-select: none;
}

.walking-path {
  position: absolute;
  bottom: clamp(0.5rem, 1.5vw, 0.75rem);
  left: 0;
  right: 0;
  height: 2px;
  background: var(--gray-light);
}

/* Timeline Section - Updated style */
.timeline-section {
  background: var(--light);
  border-radius: var(--radius);
  padding: clamp(1rem, 2.5vw, 1.2rem);
  border: 1px solid var(--gray-light);
}

.timeline-title {
  font-size: clamp(0.85rem, 2vw, 1rem);
  font-weight: 600;
  margin-bottom: 0.8rem;
  color: var(--dark);
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.timeline-container {
  position: relative;
  height: clamp(40px, 10vw, 60px);
  min-height: 40px;
}

.timeline {
  position: relative;
  height: 100%;
}

.timeline-line {
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--gray-light);
  transform: translateY(-50%);
}

.timeline-path {
  position: absolute;
  top: 50%;
  left: 0;
  height: 4px;
  transform: translateY(-50%);
  transition: width 1s ease-in-out;
  border-radius: 2px;
  background: var(--primary);
}

.timeline-marker {
  position: absolute;
  width: clamp(10px, 2.5vw, 12px);
  height: clamp(10px, 2.5vw, 12px);
  border-radius: 50%;
  transform: translate(-50%, -50%);
  transition: left 1s ease-in-out;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  background: var(--primary);
  border: 2px solid white;
}

.timeline-labels {
  display: flex;
  justify-content: space-between;
  margin-top: 0.5rem;
}

.timeline-label {
  font-size: clamp(0.65rem, 1.8vw, 0.8rem);
  color: var(--gray);
  text-align: center;
  flex: 1;
  word-wrap: break-word;
  overflow-wrap: break-word;
  padding: 0 0.25rem;
}

/* Metrics Container - Updated style */
.metrics-container {
  margin-bottom: clamp(1rem, 2.5vw, 1.5rem);
}

.metrics-title {
  font-size: clamp(0.85rem, 2vw, 1rem);
  font-weight: 600;
  margin-bottom: 0.8rem;
  color: var(--dark);
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.metrics-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: clamp(0.75rem, 2vw, 1rem);
}

.metric-item {
  text-align: center;
}

.metric-name {
  font-size: clamp(0.65rem, 1.8vw, 0.8rem);
  font-weight: 400;
  margin-bottom: 0.5rem;
  color: var(--gray);
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.donut-chart {
  position: relative;
  width: clamp(50px, 12vw, 60px);
  height: clamp(50px, 12vw, 60px);
  margin: 0 auto;
  border-radius: 50%;
  background: var(--gray-light);
  -webkit-user-select: none;
  user-select: none;
}

.donut-segment {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  clip-path: polygon(50% 50%, 50% 0%, 100% 0%, 100% 100%, 0% 100%, 0% 0%, 50% 0%);
  transform: rotate(var(--segment-rotation, 0deg));
  background: conic-gradient(
    var(--segment-color, var(--primary)) 0deg var(--segment-rotation, 0deg),
    transparent var(--segment-rotation, 0deg) 360deg
  );
}

.donut-inner {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: clamp(30px, 8vw, 40px);
  height: clamp(30px, 8vw, 40px);
  background: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: clamp(0.65rem, 1.8vw, 0.8rem);
  font-weight: 600;
  box-shadow: inset 0 0 4px rgba(0,0,0,0.1);
}

/* Controls - Updated style */
.controls {
  display: flex;
  gap: clamp(0.5rem, 1.5vw, 0.8rem);
  justify-content: center;
  margin-top: auto;
  flex-wrap: wrap;
}

.control-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  padding: clamp(0.6rem, 1.5vw, 0.75rem) clamp(0.8rem, 2vw, 1rem);
  border: none;
  border-radius: 50px;
  background: var(--primary);
  color: white;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition);
  font-size: clamp(0.75rem, 2vw, 0.9rem);
  flex: 1;
  justify-content: center;
  max-width: 100px;
  font-family: inherit;
  min-height: 40px; /* Minimum touch target */
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  user-select: none;
  position: relative;
  overflow: hidden;
}

.control-btn::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit;
  background: rgba(255, 255, 255, 0.1);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.control-btn:hover::after {
  opacity: 1;
}

.control-btn:hover {
  background: var(--primary-light);
  transform: translateY(-2px);
  box-shadow: var(--shadow);
}

.control-btn:active {
  transform: translateY(0);
}

/* Comparison Summary - Updated style */
.comparison-summary {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(min(250px, 100%), 1fr));
  gap: clamp(1rem, 2.5vw, 1.5rem);
  margin: clamp(2rem, 5vw, 3rem) 0;
}

.summary-card {
  background: var(--white);
  border-radius: var(--radius);
  padding: clamp(1rem, 2.5vw, 1.5rem);
  box-shadow: var(--shadow);
  transition: var(--transition);
  border: 1px solid var(--gray-light);
  -webkit-tap-highlight-color: transparent;
}

.summary-card:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-lg);
}

.summary-card:active {
  transform: translateY(-1px);
}

.summary-title {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: clamp(0.95rem, 2.2vw, 1.2rem);
  font-weight: 500;
  margin-bottom: 0.8rem;
  color: var(--dark);
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.summary-card p {
  font-size: clamp(0.8rem, 2vw, 0.9rem);
  line-height: 1.5;
  color: var(--gray);
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Info Panel - Updated style */
.info-panel {
  background: var(--white);
  border-radius: var(--radius);
  padding: clamp(1.25rem, 3vw, 2rem);
  box-shadow: var(--shadow);
  margin: clamp(2rem, 5vw, 3rem) 0;
  overflow-x: auto;
  border: 1px solid var(--gray-light);
  -webkit-overflow-scrolling: touch;
}

.info-header {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: clamp(0.75rem, 2vw, 1rem);
  margin-bottom: clamp(1.5rem, 4vw, 2rem);
  flex-wrap: wrap;
  text-align: center;
}

.info-icon {
  width: clamp(40px, 10vw, 50px);
  height: clamp(40px, 10vw, 50px);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: clamp(1.25rem, 3vw, 1.5rem);
  color: white;
  background: var(--primary);
  flex-shrink: 0;
}

.info-title {
  font-size: clamp(1.1rem, 3vw, 1.6rem);
  color: var(--dark);
  text-align: center;
  font-weight: 300;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.info-title strong {
  font-weight: 600;
  color: var(--primary);
}

/* Comparison Table - Updated style */
.comparison-table {
  width: 100%;
  border-collapse: collapse;
  font-size: clamp(0.85rem, 2vw, 1rem);
  min-width: 600px; /* Minimum width for scrolling on mobile */
}

.comparison-table th,
.comparison-table td {
  padding: clamp(0.75rem, 2vw, 1rem);
  text-align: left;
  border-bottom: 1px solid var(--gray-light);
  vertical-align: top;
}

.comparison-table th {
  background: var(--light);
  font-weight: 600;
  color: var(--dark);
  position: sticky;
  top: 0;
  z-index: 1;
}

.condition-header {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  font-size: clamp(0.85rem, 2vw, 1rem);
  flex-wrap: wrap;
}

.feature-name {
  font-weight: 500;
  color: var(--dark);
  min-width: 120px;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.critical-difference {
  color: var(--primary);
  font-weight: 700;
  margin-bottom: 0.3rem;
  font-size: clamp(0.85rem, 2vw, 0.95rem);
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.key-point {
  font-size: clamp(0.8rem, 1.8vw, 0.9rem);
  color: var(--gray);
  margin-top: 0.2rem;
  line-height: 1.4;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.highlight-box {
  background: var(--light);
  padding: 0.75rem;
  border-radius: 8px;
  margin-top: 0.5rem;
  border-left: 3px solid var(--primary);
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.highlight-box strong {
  color: var(--primary);
}

/* Animation Classes */
@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

.pulse {
  animation: pulse 0.5s ease;
}

@keyframes bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

.running {
  animation: bounce 0.5s infinite alternate;
}

.walking {
  animation: bounce 1s infinite alternate;
}

.slow {
  animation: bounce 2s infinite alternate;
}

.still {
  animation: none;
}

.bipolar1-extreme-high {
  background: rgba(244, 67, 54, 0.1) !important;
  color: var(--danger) !important;
  animation: pulse 0.5s infinite;
}

.bipolar1-extreme-low {
  background: rgba(74, 111, 165, 0.1) !important;
  color: var(--primary) !important;
  animation: pulse 0.8s infinite;
}

/* Loading Animation - Matched to prediction.css */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in {
  animation: fadeIn 0.5s ease forwards;
}

/* Responsive Design - Updated to match prediction.css structure */

/* Tablet Landscape */
@media (max-width: 1024px) {
  .comparison-grid {
    grid-template-columns:  1fr;
    max-width: 800px;
    margin-left: auto;
    margin-right: auto;
  }
  
  .comparison-summary {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Tablet Portrait */
@media (max-width: 768px) {
  .hero {
    padding: clamp(2.5rem, 6vw, 3rem) clamp(1rem, 3vw, 1.5rem);
  }
  
  .card-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
  }
  
  .condition-indicator {
    max-width: 100%;
    white-space: normal;
    align-self: flex-start;
  }
  
  .metrics-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
  }
  
  .controls {
    flex-wrap: wrap;
  }
  
  .control-btn {
    flex: 1 0 calc(50% - 0.4rem);
    max-width: none;
    min-width: 120px;
  }
  
  .comparison-table {
    font-size: 0.85rem;
    min-width: 500px;
  }
  
  .comparison-table th,
  .comparison-table td {
    padding: 0.75rem 0.5rem;
  }
  
  .feature-name {
    min-width: 100px;
  }
  
  .human-container {
    height: clamp(100px, 30vw, 140px);
    padding: 0.75rem;
  }
  
  .conversation-box {
    font-size: 0.85rem;
    padding: 0.6rem 0.75rem;
    max-height: 50px;
  }
  
  .walker {
    font-size: 2.5rem;
  }
  
  .timeline-section {
    padding: 1rem;
  }
  
  .timeline-container {
    height: 50px;
  }
  
  .donut-chart {
    width: 55px;
    height: 55px;
  }
  
  .donut-inner {
    width: 35px;
    height: 35px;
    font-size: 0.85rem;
  }
  
  .comparison-summary {
    grid-template-columns: 1fr;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
  }
  
  .global-controls {
    flex-direction: column;
    align-items: center;
  }
  
  .global-btn {
    width: 100%;
    max-width: 300px;
  }
}

/* Mobile Landscape */
@media (max-width: 640px) {
  .hero h1 {
    font-size: 1.8rem;
    line-height: 1.3;
  }
  
  .hero p {
    font-size: 1rem;
    margin-bottom: 1.5rem;
  }
  
  .feature-card h3 {
    font-size: 1.1rem;
  }
  
  .summary-title {
    font-size: 1rem;
  }
  
  .info-title {
    font-size: 1.3rem;
  }
  
  .walker {
    font-size: 2rem;
  }
  
  .human-container {
    height: 110px;
  }
}

/* Mobile Portrait */
@media (max-width: 480px) {
  .hero {
    padding: 2rem 1rem;
    margin-bottom: 1rem;
  }
  
  .container {
    padding: 0 1rem;
  }
  
  .visualization-card {
    padding: 1.25rem;
  }
  
  .comparison-summary {
    grid-template-columns: 1fr;
    gap: 1rem;
  }
  
  .info-panel {
    padding: 1.25rem;
    margin: 1.5rem 0;
  }
  
  .info-header {
    flex-direction: column;
    text-align: center;
    gap: 0.75rem;
    margin-bottom: 1.5rem;
  }
  
  .hero h1 {
    font-size: 1.6rem;
  }
  
  .hero p {
    font-size: 0.95rem;
  }
  
  .disclaimer-alert {
    padding: 1rem;
    margin: 1.25rem 0;
  }
  
  .alert-icon {
    font-size: 1.5rem;
  }
  
  .global-controls {
    margin: 1.5rem 0;
  }
  
  .controls {
    flex-direction: column;
    align-items: stretch;
  }
  
  .control-btn {
    flex: 1;
    max-width: none;
    width: 100%;
  }
  

  
  .walker {
    font-size: 1.75rem;
  }
  
  .human-container {
    height: 100px;
    padding: 0.5rem;
  }
  
  .conversation-box {
    font-size: 0.8rem;
    padding: 0.5rem 0.75rem;
    max-height: 45px;
  }
}

/* Small Mobile Devices */
@media (max-width: 360px) {
  .hero {
    padding: 1.75rem 0.75rem;
  }
  
  .container {
    padding: 0 0.75rem;
  }
  
  .hero h1 {
    font-size: 1.5rem;
  }
  
  .visualization-card {
    padding: 1rem;
  }
  
  .card-title {
    font-size: 1rem;
  }
  
  .condition-indicator {
    font-size: 0.75rem;
    padding: 0.3rem 0.75rem;
  }
  
  .walker {
    font-size: 1.5rem;
  }
  
  .human-container {
    height: 90px;
  }
  
  .conversation-box {
    font-size: 0.75rem;
    padding: 0.5rem 0.6rem;
  }
  
  .control-btn {
    padding: 0.5rem 0.75rem;
    font-size: 0.8rem;
  }
  
  .global-btn {
    padding: 0.75rem 1rem;
    font-size: 0.85rem;
  }
  
  .summary-card {
    padding: 1rem;
  }
  
  .info-panel {
    padding: 1rem;
  }
  
  .info-title {
    font-size: 1.1rem;
  }
  
  .comparison-table {
    font-size: 0.75rem;
    min-width: 400px;
  }
  
  .comparison-table th,
  .comparison-table td {
    padding: 0.5rem 0.4rem;
  }
}

/* Ultra Small Screens */
@media (max-width: 320px) {
  .hero h1 {
    font-size: 1.4rem;
  }
  
  .hero p {
    font-size: 0.9rem;
  }
  
  .visualization-card {
    padding: 0.875rem;
  }
  
  .walker {
    font-size: 1.25rem;
  }
  
  .human-container {
    height: 80px;
  }
  
  .conversation-box {
    font-size: 0.7rem;
  }
  
  .control-btn {
    padding: 0.5rem 0.6rem;
    font-size: 0.75rem;
  }
  
  .global-btn {
    padding: 0.7rem 0.875rem;
    font-size: 0.8rem;
  }
}

/* Touch-friendly improvements */
@media (hover: none) and (pointer: coarse) {
  .visualization-card:hover,
  .summary-card:hover,
  .global-btn:hover,
  .control-btn:hover {
    transform: none;
  }
  
  .global-btn:active,
  .control-btn:active,
  .visualization-card:active,
  .summary-card:active {
    transform: scale(0.98);
  }
  
  /* Larger touch targets for very small screens */
  @media (max-width: 480px) {
    .control-btn,
    .global-btn {
      min-height: 48px;
    }
    
    .condition-indicator {
      padding: 0.75rem 1rem;
    }
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
  
  .fade-in {
    animation: none;
    opacity: 1;
  }
  
  .running,
  .walking,
  .slow,
  .bipolar1-extreme-high,
  .bipolar1-extreme-low,
  .pulse {
    animation: none;
  }
}

/* Print Styles */
@media print {
  .hero {
    background: var(--light) !important;
    print-color-adjust: exact;
    -webkit-print-color-adjust: exact;
    padding: 2rem 0 !important;
    margin-bottom: 1rem !important;
  }
  
  .controls,
  .global-controls {
    display: none;
  }
  
  .visualization-card,
  .summary-card,
  .info-panel {
    break-inside: avoid;
    box-shadow: none !important;
    border: 1px solid #ddd !important;
  }
  
  .comparison-table {
    min-width: 100% !important;
  }
}

/* iOS-specific fixes */
@supports (-webkit-touch-callout: none) {
  .global-btn,
  .control-btn,
  .visualization-card,
  .summary-card {
    cursor: pointer;
  }
  
.human-container {
  -webkit-mask-image: -webkit-radial-gradient(white, black); /* iOS Safari */
  mask-image: radial-gradient(white, black);                /* Standard */
}
}

/* Ensure all text is selectable but buttons and interactive elements are not */
p, h1, h2, h3, h4, span:not(.global-btn *):not(.control-btn *):not(.condition-indicator) {
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  user-select: text;
}

.global-btn, .control-btn, .visualization-card, .summary-card, .condition-indicator {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Focus states for accessibility */
.global-btn:focus,
.control-btn:focus,
.condition-indicator:focus {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
  border-radius: 3px;
} </style>
  
</head>
<body>
  <!-- Hero Section -->
  <section class="hero fade-in">
    <div class="hero-content">
      <h1 id="analogy_hero_title0"></h1>
      <p id="analogy_hero_description0"></p>
    </div>
  </section>

  <div class="container">
    <div class="disclaimer-alert fade-in">
      <div class="alert-icon">‚ö†Ô∏è</div>
      <div class="alert-content">
        <h3 id="analogy_disclaimer_title0"></h3>
        <p id="analogy_disclaimer_text0"></p>
      </div>
    </div>

    <div class="global-controls fade-in">
      <button class="global-btn" onclick="startAllDemos()">
        <i class="fas fa-play"></i> <span id="analogy_global_start_all0"></span>
      </button>
      <button class="global-btn stop" onclick="stopAllDemos()">
        <i class="fas fa-stop"></i> <span id="analogy_global_stop_all0"></span>
      </button>
      <button class="global-btn" onclick="resetAllDemos()">
        <i class="fas fa-redo"></i> <span id="analogy_global_reset_all0"></span>
      </button>
    </div>

    <div class="comparison-grid">
      <!-- Bipolar I Card -->
      <div class="visualization-card bipolar1-card fade-in" id="bipolar1-visualization-card">
        <!-- Part 1: Title and Status -->
        <div class="card-header">
          <div class="card-title">
            <i class="fas fa-bolt"></i>
            <span id="analogy_bipolar1_name0"></span>
          </div>
          <div class="condition-indicator bipolar1-indicator" id="bipolar1-indicator0"></div>
        </div>

        <!-- Part 2: Human and Mood Timeline -->
        <div class="human-timeline-section">
          <div class="human-container" id="bipolar1-human-container">
            <div class="conversation-box" id="bipolar1-conversation0"></div>
            <!-- Walking human with emoji -->
            <div class="walking-human" id="bipolar1-walking-human0">
              <div class="walker" id="bipolar1-walker0">üö∂‚Äç‚û°Ô∏è</div>
            </div>
            <div class="walking-path" id="bipolar1-walking-path0"></div>
          </div>

          <div class="timeline-section">
            <div class="timeline-title" id="analogy_timeline_title0"></div>
            <div class="timeline-container" id="bipolar1-timeline-container0">
              <div class="timeline" id="bipolar1-timeline0">
                <div class="timeline-line" id="bipolar1-timeline-line0"></div>
                <div class="timeline-path" id="bipolar1-timeline-path0" style="background: #e74c3c; width: 90%"></div>
                <div class="timeline-marker" id="bipolar1-timeline-marker0" style="background: #e74c3c; left: 90%; top: 50%"></div>
                <div class="timeline-labels" id="bipolar1-timeline-labels0">
                  <div class="timeline-label" id="analogy_label_severe_depression0"></div>
                  <div class="timeline-label" id="analogy_label_normal0"></div>
                  <div class="timeline-label" id="analogy_label_mania0"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Part 3: Key Metrics -->
        <div class="metrics-container" id="bipolar1-metrics-container0">
          <div class="metrics-title" id="analogy_metrics_title0"></div>
          <div class="metrics-grid" id="bipolar1-metrics-grid0">
            <div class="metric-item" id="bipolar1-metric-item0">
              <div class="metric-name" id="analogy_energy_level0"></div>
              <div class="donut-chart" id="bipolar1-energy-chart0">
                <div class="donut-segment" id="bipolar1-energy-segment0" style="--segment-color: #f39c12; --segment-rotation: 342deg;"></div>
                <div class="donut-inner" id="bipolar1-energy-value0">95%</div>
              </div>
            </div>
            <div class="metric-item" id="bipolar1-metric-item1">
              <div class="metric-name" id="analogy_sleep_need0"></div>
              <div class="donut-chart" id="bipolar1-sleep-chart0">
                <div class="donut-segment" id="bipolar1-sleep-segment0" style="--segment-color: #9b59b6; --segment-rotation: 36deg;"></div>
                <div class="donut-inner" id="bipolar1-sleep-value0">10%</div>
              </div>
            </div>
            <div class="metric-item" id="bipolar1-metric-item2">
              <div class="metric-name" id="analogy_functionality0"></div>
              <div class="donut-chart" id="bipolar1-function-chart0">
                <div class="donut-segment" id="bipolar1-function-segment0" style="--segment-color: #2ecc71; --segment-rotation: 72deg;"></div>
                <div class="donut-inner" id="bipolar1-function-value0">30%</div>
              </div>
            </div>
            <div class="metric-item" id="bipolar1-metric-item3">
              <div class="metric-name" id="analogy_hospitalization_risk0"></div>
              <div class="donut-chart" id="bipolar1-hospital-chart0">
                <div class="donut-segment" id="bipolar1-hospital-segment0" style="--segment-color: #e74c3c; --segment-rotation: 288deg;"></div>
                <div class="donut-inner" id="bipolar1-hospital-value0">High</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Part 4: Controls -->
        <div class="controls" id="bipolar1-controls0">
          <button class="control-btn" onclick="startBipolar1Demo()">
            <i class="fas fa-play"></i> <span id="analogy_start0"></span>
          </button>
          <button class="control-btn" onclick="stopBipolar1Demo()">
            <i class="fas fa-stop"></i> <span id="analogy_stop0"></span>
          </button>
          <button class="control-btn" onclick="resetBipolar1Demo()">
            <i class="fas fa-redo"></i> <span id="analogy_reset0"></span>
          </button>
        </div>
      </div>

      <!-- Bipolar II Card -->
      <div class="visualization-card bipolar2-card fade-in" id="bipolar2-visualization-card">
        <!-- Part 1: Title and Status -->
        <div class="card-header">
          <div class="card-title">
            <i class="fas fa-wave-square"></i>
            <span id="analogy_bipolar2_name0"></span>
          </div>
          <div class="condition-indicator bipolar2-indicator" id="bipolar2-indicator0"></div>
        </div>

        <!-- Part 2: Human and Mood Timeline -->
        <div class="human-timeline-section">
          <div class="human-container" id="bipolar2-human-container">
            <div class="conversation-box" id="bipolar2-conversation0"></div>
            <div class="walking-human" id="bipolar2-walking-human0">
              <div class="walker" id="bipolar2-walker0">üö∂‚Äç‚û°Ô∏è</div>
            </div>
            <div class="walking-path" id="bipolar2-walking-path0"></div>
          </div>

          <div class="timeline-section">
            <div class="timeline-title" id="analogy_timeline_title1"></div>
            <div class="timeline-container" id="bipolar2-timeline-container0">
              <div class="timeline" id="bipolar2-timeline0">
                <div class="timeline-line" id="bipolar2-timeline-line0"></div>
                <div class="timeline-path" id="bipolar2-timeline-path0" style="background: #f39c12; width: 70%"></div>
                <div class="timeline-marker" id="bipolar2-timeline-marker0" style="background: #f39c12; left: 70%; top: 50%"></div>
                <div class="timeline-labels" id="bipolar2-timeline-labels0">
                  <div class="timeline-label" id="analogy_label_severe_depression1"></div>
                  <div class="timeline-label" id="analogy_label_normal1"></div>
                  <div class="timeline-label" id="analogy_label_hypomania0"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Part 3: Key Metrics -->
        <div class="metrics-container" id="bipolar2-metrics-container0">
          <div class="metrics-title" id="analogy_metrics_title1"></div>
          <div class="metrics-grid" id="bipolar2-metrics-grid0">
            <div class="metric-item" id="bipolar2-metric-item0">
              <div class="metric-name" id="analogy_energy_level1"></div>
              <div class="donut-chart" id="bipolar2-energy-chart0">
                <div class="donut-segment" id="bipolar2-energy-segment0" style="--segment-color: #f39c12; --segment-rotation: 270deg;"></div>
                <div class="donut-inner" id="bipolar2-energy-value0">75%</div>
              </div>
            </div>
            <div class="metric-item" id="bipolar2-metric-item1">
              <div class="metric-name" id="analogy_sleep_need1"></div>
              <div class="donut-chart" id="bipolar2-sleep-chart0">
                <div class="donut-segment" id="bipolar2-sleep-segment0" style="--segment-color: #9b59b6; --segment-rotation: 144deg;"></div>
                <div class="donut-inner" id="bipolar2-sleep-value0">40%</div>
              </div>
            </div>
            <div class="metric-item" id="bipolar2-metric-item2">
              <div class="metric-name" id="analogy_functionality1"></div>
              <div class="donut-chart" id="bipolar2-function-chart0">
                <div class="donut-segment" id="bipolar2-function-segment0" style="--segment-color: #2ecc71; --segment-rotation: 216deg;"></div>
                <div class="donut-inner" id="bipolar2-function-value0">60%</div>
              </div>
            </div>
            <div class="metric-item" id="bipolar2-metric-item3">
              <div class="metric-name" id="analogy_hospitalization_risk1"></div>
              <div class="donut-chart" id="bipolar2-hospital-chart0">
                <div class="donut-segment" id="bipolar2-hospital-segment0" style="--segment-color: #e74c3c; --segment-rotation: 108deg;"></div>
                <div class="donut-inner" id="bipolar2-hospital-value0">Low</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Part 4: Controls -->
        <div class="controls" id="bipolar2-controls0">
          <button class="control-btn" onclick="startBipolar2Demo()">
            <i class="fas fa-play"></i> <span id="analogy_start1"></span>
          </button>
          <button class="control-btn" onclick="stopBipolar2Demo()">
            <i class="fas fa-stop"></i> <span id="analogy_stop1"></span>
          </button>
          <button class="control-btn" onclick="resetBipolar2Demo()">
            <i class="fas fa-redo"></i> <span id="analogy_reset1"></span>
          </button>
        </div>
      </div>

      <!-- Depression Card -->
      <div class="visualization-card depression-card fade-in" id="depression-visualization-card">
        <!-- Part 1: Title and Status -->
        <div class="card-header">
          <div class="card-title">
            <i class="fas fa-cloud"></i>
            <span id="analogy_depression_name0"></span>
          </div>
          <div class="condition-indicator depression-indicator" id="depression-indicator0"></div>
        </div>

        <!-- Part 2: Human and Mood Timeline -->
        <div class="human-timeline-section">
          <div class="human-container" id="depression-human-container">
            <div class="conversation-box" id="depression-conversation0"></div>
            <div class="walking-human" id="depression-walking-human0">
              <div class="walker" id="depression-walker0">üö∂‚Äç‚û°Ô∏è</div>
            </div>
            <div class="walking-path" id="depression-walking-path0"></div>
          </div>

          <div class="timeline-section">
            <div class="timeline-title" id="analogy_timeline_title2"></div>
            <div class="timeline-container" id="depression-timeline-container0">
              <div class="timeline" id="depression-timeline0">
                <div class="timeline-line" id="depression-timeline-line0"></div>
                <div class="timeline-path" id="depression-timeline-path0" style="background: #3498db; width: 15%"></div>
                <div class="timeline-marker" id="depression-timeline-marker0" style="background: #3498db; left: 15%; top: 50%"></div>
                <div class="timeline-labels" id="depression-timeline-labels0">
                  <div class="timeline-label" id="analogy_label_severe_depression2"></div>
                  <div class="timeline-label" id="analogy_label_normal2"></div>
                  <div class="timeline-label" id="analogy_label_no_highs0"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Part 3: Key Metrics -->
        <div class="metrics-container" id="depression-metrics-container0">
          <div class="metrics-title" id="analogy_metrics_title2"></div>
          <div class="metrics-grid" id="depression-metrics-grid0">
            <div class="metric-item" id="depression-metric-item0">
              <div class="metric-name" id="analogy_energy_level2"></div>
              <div class="donut-chart" id="depression-energy-chart0">
                <div class="donut-segment" id="depression-energy-segment0" style="--segment-color: #2980b9; --segment-rotation: 36deg;"></div>
                <div class="donut-inner" id="depression-energy-value0">10%</div>
              </div>
            </div>
            <div class="metric-item" id="depression-metric-item1">
              <div class="metric-name" id="analogy_sleep_need2"></div>
              <div class="donut-chart" id="depression-sleep-chart0">
                <div class="donut-segment" id="depression-sleep-segment0" style="--segment-color: #9b59b6; --segment-rotation: 324deg;"></div>
                <div class="donut-inner" id="depression-sleep-value0">90%</div>
              </div>
            </div>
            <div class="metric-item" id="depression-metric-item2">
              <div class="metric-name" id="analogy_functionality2"></div>
              <div class="donut-chart" id="depression-function-chart0">
                <div class="donut-segment" id="depression-function-segment0" style="--segment-color: #2ecc71; --segment-rotation: 72deg;"></div>
                <div class="donut-inner" id="depression-function-value0">20%</div>
              </div>
            </div>
            <div class="metric-item" id="depression-metric-item3">
              <div class="metric-name" id="analogy_hospitalization_risk2"></div>
              <div class="donut-chart" id="depression-hospital-chart0">
                <div class="donut-segment" id="depression-hospital-segment0" style="--segment-color: #e74c3c; --segment-rotation: 180deg;"></div>
                <div class="donut-inner" id="depression-hospital-value0">Medium</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Part 4: Controls -->
        <div class="controls" id="depression-controls0">
          <button class="control-btn" onclick="startDepressionDemo()">
            <i class="fas fa-play"></i> <span id="analogy_start2"></span>
          </button>
          <button class="control-btn" onclick="stopDepressionDemo()">
            <i class="fas fa-stop"></i> <span id="analogy_stop2"></span>
          </button>
          <button class="control-btn" onclick="resetDepressionDemo()">
            <i class="fas fa-redo"></i> <span id="analogy_reset2"></span>
          </button>
        </div>
      </div>

      <!-- Normal Card -->
      <div class="visualization-card normal-card fade-in" id="normal-visualization-card">
        <!-- Part 1: Title and Status -->
        <div class="card-header">
          <div class="card-title">
            <i class="fas fa-balance-scale"></i>
            <span id="analogy_normal_name0"></span>
          </div>
          <div class="condition-indicator normal-indicator" id="normal-indicator0"></div>
        </div>

        <!-- Part 2: Human and Mood Timeline -->
        <div class="human-timeline-section">
          <div class="human-container" id="normal-human-container">
            <div class="conversation-box" id="normal-conversation0"></div>
            <div class="walking-human" id="normal-walking-human0">
              <div class="walker" id="normal-walker0">üö∂‚Äç‚û°Ô∏è</div>
            </div>
            <div class="walking-path" id="normal-walking-path0"></div>
          </div>

          <div class="timeline-section">
            <div class="timeline-title" id="analogy_timeline_title3"></div>
            <div class="timeline-container" id="normal-timeline-container0">
              <div class="timeline" id="normal-timeline0">
                <div class="timeline-line" id="normal-timeline-line0"></div>
                <div class="timeline-path" id="normal-timeline-path0" style="background: #27ae60; width: 50%"></div>
                <div class="timeline-marker" id="normal-timeline-marker0" style="background: #27ae60; left: 50%; top: 50%"></div>
                <div class="timeline-labels" id="normal-timeline-labels0">
                  <div class="timeline-label" id="analogy_label_sad_moments0"></div>
                  <div class="timeline-label" id="analogy_label_normal3"></div>
                  <div class="timeline-label" id="analogy_label_happy_moments0"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Part 3: Key Metrics -->
        <div class="metrics-container" id="normal-metrics-container0">
          <div class="metrics-title" id="analogy_metrics_title3"></div>
          <div class="metrics-grid" id="normal-metrics-grid0">
            <div class="metric-item" id="normal-metric-item0">
              <div class="metric-name" id="analogy_energy_level3"></div>
              <div class="donut-chart" id="normal-energy-chart0">
                <div class="donut-segment" id="normal-energy-segment0" style="--segment-color: #27ae60; --segment-rotation: 198deg;"></div>
                <div class="donut-inner" id="normal-energy-value0">55%</div>
              </div>
            </div>
            <div class="metric-item" id="normal-metric-item1">
              <div class="metric-name" id="analogy_sleep_need3"></div>
              <div class="donut-chart" id="normal-sleep-chart0">
                <div class="donut-segment" id="normal-sleep-segment0" style="--segment-color: #9b59b6; --segment-rotation: 252deg;"></div>
                <div class="donut-inner" id="normal-sleep-value0">70%</div>
              </div>
            </div>
            <div class="metric-item" id="normal-metric-item2">
              <div class="metric-name" id="analogy_functionality3"></div>
              <div class="donut-chart" id="normal-function-chart0">
                <div class="donut-segment" id="normal-function-segment0" style="--segment-color: #2ecc71; --segment-rotation: 324deg;"></div>
                <div class="donut-inner" id="normal-function-value0">90%</div>
              </div>
            </div>
            <div class="metric-item" id="normal-metric-item3">
              <div class="metric-name" id="analogy_hospitalization_risk3"></div>
              <div class="donut-chart" id="normal-hospital-chart0">
                <div class="donut-segment" id="normal-hospital-segment0" style="--segment-color: #e74c3c; --segment-rotation: 18deg;"></div>
                <div class="donut-inner" id="normal-hospital-value0">None</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Part 4: Controls -->
        <div class="controls" id="normal-controls0">
          <button class="control-btn" onclick="startNormalDemo()">
            <i class="fas fa-play"></i> <span id="analogy_start3"></span>
          </button>
          <button class="control-btn" onclick="stopNormalDemo()">
            <i class="fas fa-stop"></i> <span id="analogy_stop3"></span>
          </button>
          <button class="control-btn" onclick="resetNormalDemo()">
            <i class="fas fa-redo"></i> <span id="analogy_reset3"></span>
          </button>
        </div>
      </div>
    </div>

    <!-- Comparison Summary -->
    <div class="comparison-summary">
      <div class="summary-card summary-bipolar1" id="summary-bipolar1-card0">
        <div class="summary-title">
          <i class="fas fa-bolt"></i> <span id="analogy_summary_bipolar1_title0"></span>
        </div>
        <p id="analogy_summary_bipolar1_description0"></p>
      </div>
      <div class="summary-card summary-bipolar2" id="summary-bipolar2-card0">
        <div class="summary-title">
          <i class="fas fa-wave-square"></i> <span id="analogy_summary_bipolar2_title0"></span>
        </div>
        <p id="analogy_summary_bipolar2_description0"></p>
      </div>
      <div class="summary-card summary-depression" id="summary-depression-card0">
        <div class="summary-title">
          <i class="fas fa-cloud"></i> <span id="analogy_summary_depression_title0"></span>
        </div>
        <p id="analogy_summary_depression_description0"></p>
      </div>
      <div class="summary-card summary-normal" id="summary-normal-card0">
        <div class="summary-title">
          <i class="fas fa-balance-scale"></i> <span id="analogy_summary_normal_title0"></span>
        </div>
        <p id="analogy_summary_normal_description0"></p>
      </div>
    </div>

    <div class="info-panel fade-in">
      <div class="info-header">
        <div class="info-icon bipolar1-icon" id="bipolar1-info-icon0">
          <i class="fas fa-bolt"></i>
        </div>
        <h2 class="info-title" id="analogy_comparison_title0"></h2>
        <div class="info-icon depression-icon" id="depression-info-icon0">
          <i class="fas fa-cloud"></i>
        </div>
      </div>

      <table class="comparison-table">
        <thead>
          <tr>
            <th id="analogy_table_feature_header0"></th>
            <th>
              <div class="condition-header bipolar1-header" id="bipolar1-condition-header0">
                <i class="fas fa-bolt"></i> <span id="analogy_table_bipolar1_header0"></span>
              </div>
            </th>
            <th>
              <div class="condition-header bipolar2-header" id="bipolar2-condition-header0">
                <i class="fas fa-wave-square"></i> <span id="analogy_table_bipolar2_header0"></span>
              </div>
            </th>
            <th>
              <div class="condition-header depression-header" id="depression-condition-header0">
                <i class="fas fa-cloud"></i> <span id="analogy_table_depression_header0"></span>
              </div>
            </th>
            <th>
              <div class="condition-header normal-header" id="normal-condition-header0">
                <i class="fas fa-balance-scale"></i> <span id="analogy_table_normal_header0"></span>
              </div>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr class="high-mood-row" id="high-mood-row0">
            <td class="feature-name" id="analogy_table_high_mood0"></td>
            <td id="analogy_bipolar1_high_mood_content0"></td>
            <td id="analogy_bipolar2_high_mood_content0"></td>
            <td id="analogy_depression_high_mood_content0"></td>
            <td id="analogy_normal_high_mood_content0"></td>
          </tr>
          <tr class="low-mood-row" id="low-mood-row0">
            <td class="feature-name" id="analogy_table_low_mood0"></td>
            <td id="analogy_bipolar1_low_mood_content0"></td>
            <td id="analogy_bipolar2_low_mood_content0"></td>
            <td id="analogy_depression_low_mood_content0"></td>
            <td id="analogy_normal_low_mood_content0"></td>
          </tr>
          <tr id="energy-row0">
            <td class="feature-name" id="analogy_table_energy0"></td>
            <td id="analogy_bipolar1_energy_content0"></td>
            <td id="analogy_bipolar2_energy_content0"></td>
            <td id="analogy_depression_energy_content0"></td>
            <td id="analogy_normal_energy_content0"></td>
          </tr>
          <tr id="sleep-row0">
            <td class="feature-name" id="analogy_table_sleep0"></td>
            <td id="analogy_bipolar1_sleep_content0"></td>
            <td id="analogy_bipolar2_sleep_content0"></td>
            <td id="analogy_depression_sleep_content0"></td>
            <td id="analogy_normal_sleep_content0"></td>
          </tr>
          <tr id="impact-row0">
            <td class="feature-name" id="analogy_table_impact0"></td>
            <td id="analogy_bipolar1_impact_content0"></td>
            <td id="analogy_bipolar2_impact_content0"></td>
            <td id="analogy_depression_impact_content0"></td>
            <td id="analogy_normal_impact_content0"></td>
          </tr>
          <tr class="diagnosis-key" id="diagnosis-key-row0">
            <td class="feature-name" id="analogy_table_diagnosis0"></td>
            <td id="analogy_bipolar1_diagnosis_content0"></td>
            <td id="analogy_bipolar2_diagnosis_content0"></td>
            <td id="analogy_depression_diagnosis_content0"></td>
            <td id="analogy_normal_diagnosis_content0"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

<script>
    // Animation intervals
    let bipolar1Interval, bipolar2Interval, depressionInterval, normalInterval;

    // Helper function to get indicator text from translations
    function getIndicatorText(condition, state) {
        if (!window.i18n || !window.i18n.translations) {
            // Fallback to English defaults if i18n not available
            const defaults = {
                'bipolar1': {
                    'manic': 'MANIC EPISODE',
                    'depressive': 'DEPRESSIVE EPISODE',
                    'default': 'EXTREME ROLLERCOASTER'
                },
                'bipolar2': {
                    'hypomanic': 'HYPOMANIC EPISODE',
                    'depressive': 'DEPRESSIVE EPISODE',
                    'default': 'MILD HIGHS, DEEP LOWS'
                },
                'depression': {
                    'depressive': 'DEPRESSIVE EPISODE',
                    'default': 'ONLY DEEP LOWS'
                },
                'normal': {
                    'default': 'EVERYDAY UPS AND DOWNS'
                }
            };
            return defaults[condition]?.[state] || defaults[condition]?.default || '';
        }
        
        const currentLang = window.i18n.currentLang;
        const translations = window.i18n.translations[currentLang]?.analogy?.analogy_conditions;
        
        if (!translations || !translations[condition]) return '';
        
        const conditionData = translations[condition];
        
        switch(state) {
            case 'manic':
                return conditionData.indicator_manic0 || conditionData.indicator_default0 || '';
            case 'hypomanic':
                return conditionData.indicator_hypomanic0 || conditionData.indicator_default0 || '';
            case 'depressive':
            case 'depression':
                return conditionData.indicator_depressive0 || conditionData.indicator_default0 || '';
            default:
                return conditionData.indicator_default0 || '';
        }
    }

    // Conversation messages for each condition
    let bipolar1Messages = {
        manic: [],
        depressive: []
    };
    
    let bipolar2Messages = [];
    let depressionMessages = [];
    let normalMessages = [];
    
    // Emoji walkers for each condition
    const bipolar1Walkers = {
        manic: ["üèÉ‚Äç‚ôÇÔ∏è‚Äç‚û°Ô∏è", "üí®", "‚ö°", "üöÄ", "üéØ"],
        depressive: ["üö∂‚Äç‚û°Ô∏è", "üêå", "üí§", "üò¥", "üõå"]
    };
    const bipolar2Walkers = ["üö∂‚Äç‚û°Ô∏è", "üèÉ‚Äç‚ôÇÔ∏è‚Äç‚û°Ô∏è", "üö∂‚Äç‚û°Ô∏è", "üèÉ‚Äç‚ôÇÔ∏è‚Äç‚û°Ô∏è", "üö∂‚Äç‚û°Ô∏è"];
    const depressionWalkers = ["üö∂‚Äç‚û°Ô∏è", "üêå", "üí§", "üò¥", "üõå"];
    const normalWalkers = ["üö∂‚Äç‚û°Ô∏è", "üö∂‚Äç‚û°Ô∏è", "üö∂‚Äç‚û°Ô∏è", "üö∂‚Äç‚û°Ô∏è", "üö∂‚Äç‚û°Ô∏è"];
    
    // Load conversation messages from i18n system
    const loadConversationMessages = () => {
        if (window.i18n && window.i18n.translations) {
            const currentLang = window.i18n.currentLang;
            const translations = window.i18n.translations[currentLang];
            
            if (translations && translations.analogy && translations.analogy.analogy_conditions) {
                const analogyConditions = translations.analogy.analogy_conditions;
                
                // Load Bipolar I messages
                if (analogyConditions.bipolar1 && analogyConditions.bipolar1.conversations0) {
                    bipolar1Messages = analogyConditions.bipolar1.conversations0;
                }
                
                // Load Bipolar II messages
                if (analogyConditions.bipolar2 && analogyConditions.bipolar2.conversations0) {
                    bipolar2Messages = analogyConditions.bipolar2.conversations0;
                }
                
                // Load Depression messages
                if (analogyConditions.depression && analogyConditions.depression.conversations0) {
                    depressionMessages = analogyConditions.depression.conversations0;
                }
                
                // Load Normal messages
                if (analogyConditions.normal && analogyConditions.normal.conversations0) {
                    normalMessages = analogyConditions.normal.conversations0;
                }
            }
        }
    };

    // Bipolar I Disorder Demo
    function startBipolar1Demo() {
        stopBipolar1Demo();
        const indicator = document.getElementById('bipolar1-indicator0');
        const walker = document.getElementById('bipolar1-walker0');
        
        let currentEpisode = 'manic';
        let moodValue = 90;
        let manicMessageIndex = 0;
        let depressiveMessageIndex = 0;
        let manicWalkerIndex = 0;
        let depressiveWalkerIndex = 0;
        
        // Initialize state with translated text
        indicator.textContent = getIndicatorText('bipolar1', 'manic');
        indicator.classList.add('bipolar1-extreme-high');
        walker.classList.add('running');

        bipolar1Interval = setInterval(() => {
            // Episode swapping logic
            if (currentEpisode === 'manic' && Math.random() > 0.7) {
                currentEpisode = 'depressive';
                indicator.textContent = getIndicatorText('bipolar1', 'depressive');
                indicator.classList.remove('bipolar1-extreme-high');
                indicator.classList.add('bipolar1-extreme-low');
                walker.classList.remove('running');
                walker.classList.add('slow');
            } else if (currentEpisode === 'depressive' && Math.random() > 0.8) {
                currentEpisode = 'manic';
                indicator.textContent = getIndicatorText('bipolar1', 'manic');
                indicator.classList.remove('bipolar1-extreme-low');
                indicator.classList.add('bipolar1-extreme-high');
                walker.classList.remove('slow');
                walker.classList.add('running');
            }
            
            // Mood & metrics update
            let currentMessage, currentWalker;

            if (currentEpisode === 'manic') {
                moodValue = 85 + Math.random() * 10;
                updateMetrics('bipolar1', 90 + Math.random() * 10, 10 + Math.random() * 5, 25 + Math.random() * 10, 70 + Math.random() * 20, '0');
                
                currentMessage = bipolar1Messages.manic[manicMessageIndex];
                currentWalker = bipolar1Walkers.manic[manicWalkerIndex];
                
                manicMessageIndex = (manicMessageIndex + 1) % bipolar1Messages.manic.length;
                manicWalkerIndex = (manicWalkerIndex + 1) % bipolar1Walkers.manic.length;

            } else {
                moodValue = 10 + Math.random() * 10;
                updateMetrics('bipolar1', 10 + Math.random() * 5, 90 + Math.random() * 5, 20 + Math.random() * 5, 45 + Math.random() * 10, '0');
                
                currentMessage = bipolar1Messages.depressive[depressiveMessageIndex];
                currentWalker = bipolar1Walkers.depressive[depressiveWalkerIndex];

                depressiveMessageIndex = (depressiveMessageIndex + 1) % bipolar1Messages.depressive.length;
                depressiveWalkerIndex = (depressiveWalkerIndex + 1) % bipolar1Walkers.depressive.length;
            }
            
            // UI updates
            updateConversation('bipolar1', currentMessage, '0');
            updateWalker('bipolar1', currentWalker, '0');
            updateTimeline('bipolar1', moodValue, '0');
            updateWalkingHuman('bipolar1', moodValue, '0');
        }, 2000);
    }

    function stopBipolar1Demo() {
        clearInterval(bipolar1Interval);
        const indicator = document.getElementById('bipolar1-indicator0');
        const walker = document.getElementById('bipolar1-walker0');
        indicator.classList.remove('pulse', 'bipolar1-extreme-high', 'bipolar1-extreme-low');
        walker.classList.remove('running', 'slow');
    }

    function resetBipolar1Demo() {
        stopBipolar1Demo();
        const indicator = document.getElementById('bipolar1-indicator0');
        const walker = document.getElementById('bipolar1-walker0');
        
        indicator.textContent = getIndicatorText('bipolar1', 'default');
        indicator.classList.remove('pulse', 'bipolar1-extreme-high', 'bipolar1-extreme-low');
        walker.classList.remove('running', 'walking', 'slow', 'still');
        walker.classList.add('running');
        
        updateTimeline('bipolar1', 90, '0');
        updateWalkingHuman('bipolar1', 90, '0');
        updateMetrics('bipolar1', 95, 10, 30, 80, '0');
        
        updateConversation('bipolar1', bipolar1Messages.manic[0], '0');
        updateWalker('bipolar1', bipolar1Walkers.manic[0], '0');
    }

    // Bipolar II Disorder Demo
    function startBipolar2Demo() {
        stopBipolar2Demo();
        const indicator = document.getElementById('bipolar2-indicator0');
        const walker = document.getElementById('bipolar2-walker0');
        
        let moodValue = 70;
        let episode = 'hypomanic';
        let messageIndex = 0;
        let walkerIndex = 0;
        
        indicator.textContent = getIndicatorText('bipolar2', 'hypomanic');
        
        bipolar2Interval = setInterval(() => {
            if (episode === 'hypomanic' && Math.random() > 0.8) {
                episode = 'depressive';
                indicator.textContent = getIndicatorText('bipolar2', 'depressive');
                walker.classList.remove('walking');
                walker.classList.add('slow');
            } else if (episode === 'depressive' && Math.random() > 0.9) {
                episode = 'hypomanic';
                indicator.textContent = getIndicatorText('bipolar2', 'hypomanic');
                walker.classList.remove('slow');
                walker.classList.add('walking');
            }
            
            if (episode === 'hypomanic') {
                moodValue = 65 + Math.random() * 10;
                updateMetrics('bipolar2', 70 + Math.random() * 10, 40 + Math.random() * 10, 55 + Math.random() * 10, 25 + Math.random() * 10, '0');
                updateConversation('bipolar2', bipolar2Messages[messageIndex], '0');
                updateWalker('bipolar2', bipolar2Walkers[walkerIndex], '0');
            } else {
                moodValue = 15 + Math.random() * 10;
                updateMetrics('bipolar2', 15 + Math.random() * 10, 80 + Math.random() * 10, 20 + Math.random() * 10, 40 + Math.random() * 10, '0');
                updateConversation('bipolar2', bipolar2Messages[messageIndex], '0');
                updateWalker('bipolar2', bipolar2Walkers[4], '0');
            }
            
            messageIndex = (messageIndex + 1) % bipolar2Messages.length;
            walkerIndex = (walkerIndex + 1) % bipolar2Walkers.length;
            
            updateTimeline('bipolar2', moodValue, '0');
            updateWalkingHuman('bipolar2', moodValue, '0');
        }, 1800);
    }

    function stopBipolar2Demo() {
        clearInterval(bipolar2Interval);
        const indicator = document.getElementById('bipolar2-indicator0');
        const walker = document.getElementById('bipolar2-walker0');
        indicator.classList.remove('pulse');
        walker.classList.remove('walking', 'slow');
    }

    function resetBipolar2Demo() {
        stopBipolar2Demo();
        const indicator = document.getElementById('bipolar2-indicator0');
        const walker = document.getElementById('bipolar2-walker0');
        
        indicator.textContent = getIndicatorText('bipolar2', 'default');
        indicator.classList.remove('pulse');
        walker.classList.remove('running', 'walking', 'slow', 'still');
        walker.classList.add('walking');
        
        updateTimeline('bipolar2', 70, '0');
        updateWalkingHuman('bipolar2', 70, '0');
        updateMetrics('bipolar2', 75, 40, 60, 30, '0');
        
        updateConversation('bipolar2', bipolar2Messages[0], '0');
        updateWalker('bipolar2', bipolar2Walkers[0], '0');
    }

    // Depression Demo
    function startDepressionDemo() {
        stopDepressionDemo();
        const indicator = document.getElementById('depression-indicator0');
        const walker = document.getElementById('depression-walker0');
        
        let moodValue = 15;
        let messageIndex = 0;
        let walkerIndex = 0;
        
        indicator.textContent = getIndicatorText('depression', 'depressive');
        
        depressionInterval = setInterval(() => {
            moodValue = 10 + Math.random() * 10;
            
            updateTimeline('depression', moodValue, '0');
            updateWalkingHuman('depression', moodValue, '0');
            updateMetrics('depression', 10 + Math.random() * 5, 90 + Math.random() * 5, 20 + Math.random() * 5, 45 + Math.random() * 10, '0');
            
            updateConversation('depression', depressionMessages[messageIndex], '0');
            messageIndex = (messageIndex + 1) % depressionMessages.length;
            
            updateWalker('depression', depressionWalkers[walkerIndex], '0');
            walkerIndex = (walkerIndex + 1) % depressionWalkers.length;
        }, 2000);
    }

    function stopDepressionDemo() {
        clearInterval(depressionInterval);
        const indicator = document.getElementById('depression-indicator0');
        const walker = document.getElementById('depression-walker0');
        indicator.classList.remove('pulse');
        walker.classList.remove('slow');
    }

    function resetDepressionDemo() {
        stopDepressionDemo();
        const indicator = document.getElementById('depression-indicator0');
        const walker = document.getElementById('depression-walker0');
        
        indicator.textContent = getIndicatorText('depression', 'default');
        indicator.classList.remove('pulse');
        walker.classList.remove('running', 'walking', 'slow', 'still');
        walker.classList.add('slow');
        
        updateTimeline('depression', 15, '0');
        updateWalkingHuman('depression', 15, '0');
        updateMetrics('depression', 10, 90, 20, 50, '0');
        
        updateConversation('depression', depressionMessages[0], '0');
        updateWalker('depression', depressionWalkers[0], '0');
    }

    // Normal Mood Demo
    function startNormalDemo() {
        stopNormalDemo();
        const indicator = document.getElementById('normal-indicator0');
        const walker = document.getElementById('normal-walker0');
        
        let moodValue = 50;
        let messageIndex = 0;
        let walkerIndex = 0;
        
        indicator.textContent = getIndicatorText('normal', 'default');
        
        normalInterval = setInterval(() => {
            moodValue = 45 + Math.random() * 10;
            
            updateTimeline('normal', moodValue, '0');
            updateWalkingHuman('normal', moodValue, '0');
            updateMetrics('normal', 50 + Math.random() * 10, 70 + Math.random() * 10, 85 + Math.random() * 10, 5 + Math.random() * 5, '0');
            
            updateConversation('normal', normalMessages[messageIndex], '0');
            messageIndex = (messageIndex + 1) % normalMessages.length;
            
            updateWalker('normal', normalWalkers[walkerIndex], '0');
            walkerIndex = (walkerIndex + 1) % normalWalkers.length;
        }, 1600);
    }

    function stopNormalDemo() {
        clearInterval(normalInterval);
        const indicator = document.getElementById('normal-indicator0');
        const walker = document.getElementById('normal-walker0');
        indicator.classList.remove('pulse');
        walker.classList.remove('walking');
    }

    function resetNormalDemo() {
        stopNormalDemo();
        const indicator = document.getElementById('normal-indicator0');
        const walker = document.getElementById('normal-walker0');
        
        indicator.textContent = getIndicatorText('normal', 'default');
        indicator.classList.remove('pulse');
        walker.classList.remove('running', 'walking', 'slow', 'still');
        walker.classList.add('walking');
        
        updateTimeline('normal', 50, '0');
        updateWalkingHuman('normal', 50, '0');
        updateMetrics('normal', 55, 70, 90, 5, '0');
        
        updateConversation('normal', normalMessages[0], '0');
        updateWalker('normal', normalWalkers[0], '0');
    }

    // Helper functions
    function updateTimeline(condition, moodValue, suffix = '') {
        const timelinePath = document.getElementById(`${condition}-timeline-path${suffix}`);
        const timelineMarker = document.getElementById(`${condition}-timeline-marker${suffix}`);
        
        if (timelinePath && timelineMarker) {
            timelinePath.style.width = `${moodValue}%`;
            timelineMarker.style.left = `${moodValue}%`;
        }
    }

    function updateWalkingHuman(condition, moodValue, suffix = '') {
        const walkingHuman = document.getElementById(`${condition}-walking-human${suffix}`);
        
        if (walkingHuman && walkingHuman.parentElement) {
            const containerWidth = walkingHuman.parentElement.offsetWidth;
            const humanWidth = walkingHuman.offsetWidth;
            const position = (moodValue / 100) * (containerWidth - humanWidth);
            walkingHuman.style.left = `${position}px`;
        }
    }

    function updateConversation(condition, message, suffix = '') {
        const conversationBox = document.getElementById(`${condition}-conversation${suffix}`);
        if (conversationBox) {
            conversationBox.textContent = message;
            conversationBox.classList.remove('pulse');
            void conversationBox.offsetWidth;
            conversationBox.classList.add('pulse');
        }
    }

    function updateWalker(condition, emoji, suffix = '') {
        const walker = document.getElementById(`${condition}-walker${suffix}`);
        if (walker) {
            walker.textContent = emoji;
            walker.classList.remove('pulse');
            void walker.offsetWidth;
            walker.classList.add('pulse');
        }
    }

    function updateMetrics(condition, energy, sleep, functionality, hospitalization, suffix = '') {
        updateDonutChart(`${condition}-energy-chart${suffix}`, `${condition}-energy-segment${suffix}`, energy, `${condition}-energy-value${suffix}`);
        updateDonutChart(`${condition}-sleep-chart${suffix}`, `${condition}-sleep-segment${suffix}`, sleep, `${condition}-sleep-value${suffix}`);
        updateDonutChart(`${condition}-function-chart${suffix}`, `${condition}-function-segment${suffix}`, functionality, `${condition}-function-value${suffix}`);
        
        let hospitalText = 'None';
        if (hospitalization > 60) hospitalText = 'High';
        else if (hospitalization > 30) hospitalText = 'Medium';
        else if (hospitalization > 10) hospitalText = 'Low';
        
        const hospitalValueElement = document.getElementById(`${condition}-hospital-value${suffix}`);
        if (hospitalValueElement) {
            hospitalValueElement.textContent = hospitalText;
        }
        
        let hospitalPercentage = 5;
        if (hospitalText === 'High') hospitalPercentage = 80;
        else if (hospitalText === 'Medium') hospitalPercentage = 50;
        else if (hospitalText === 'Low') hospitalPercentage = 30;
        
        updateDonutChart(`${condition}-hospital-chart${suffix}`, `${condition}-hospital-segment${suffix}`, hospitalPercentage, `${condition}-hospital-value${suffix}`);
    }
    
    function updateDonutChart(chartId, segmentId, percentage, valueId) {
        const segment = document.getElementById(segmentId);
        const valueElement = document.getElementById(valueId);
        
        if (segment && valueElement) {
            const rotation = (percentage / 100) * 360;
            segment.style.setProperty('--segment-rotation', `${rotation}deg`);
            
            if (valueId.includes('hospital')) {
                let hospitalText = 'None';
                if (percentage > 60) hospitalText = 'High';
                else if (percentage > 30) hospitalText = 'Medium';
                else if (percentage > 10) hospitalText = 'Low';
                valueElement.textContent = hospitalText;
            } else {
                valueElement.textContent = `${Math.round(percentage)}%`;
            }
        }
    }

    // Global control functions
    function startAllDemos() {
        startBipolar1Demo();
        startBipolar2Demo();
        startDepressionDemo();
        startNormalDemo();
    }

    function stopAllDemos() {
        stopBipolar1Demo();
        stopBipolar2Demo();
        stopDepressionDemo();
        stopNormalDemo();
    }

    function resetAllDemos() {
        resetBipolar1Demo();
        resetBipolar2Demo();
        resetDepressionDemo();
        resetNormalDemo();
    }

    // Function to update indicator texts when language changes
    function updateIndicatorTexts() {
        const indicators = [
            { id: 'bipolar1-indicator0', condition: 'bipolar1', state: 'default' },
            { id: 'bipolar2-indicator0', condition: 'bipolar2', state: 'default' },
            { id: 'depression-indicator0', condition: 'depression', state: 'default' },
            { id: 'normal-indicator0', condition: 'normal', state: 'default' }
        ];
        
        indicators.forEach(indicator => {
            const element = document.getElementById(indicator.id);
            if (element) {
                const condition = indicator.condition;
                const isRunning = 
                    (condition === 'bipolar1' && bipolar1Interval) ||
                    (condition === 'bipolar2' && bipolar2Interval) ||
                    (condition === 'depression' && depressionInterval) ||
                    (condition === 'normal' && normalInterval);
                
                if (!isRunning) {
                    element.textContent = getIndicatorText(indicator.condition, indicator.state);
                }
            }
        });
    }

    // Initialize the page
    document.addEventListener('DOMContentLoaded', function() {
        // Load conversation messages after i18n system is ready
        setTimeout(() => {
            loadConversationMessages();
            resetAllDemos();
        }, 500);
        
        // Add scroll animation
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);
        
        // Observe all fade-in elements
        document.querySelectorAll('.fade-in').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(20px)';
            el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            observer.observe(el);
        });
        
        // Handle window resize
        window.addEventListener('resize', function() {
            document.body.classList.toggle('mobile-view', window.innerWidth <= 768);
        });
        
        // Initialize mobile view class
        if (window.innerWidth <= 768) {
            document.body.classList.add('mobile-view');
        }
        
        // Listen for language changes
        document.addEventListener('languageChanged', (e) => {
            console.log('Language changed, updating indicator texts...');
            updateIndicatorTexts();
            loadConversationMessages();
        });
    });

    // Make functions available globally
    window.loadConversationMessages = loadConversationMessages;
    window.resetAllDemos = resetAllDemos;
    window.startAllDemos = startAllDemos;
    window.stopAllDemos = stopAllDemos;
</script>
  </body>
</html>

